# Ativar RewriteEngine

RewriteEngine On

# Forçar o redirecionamento para "www" e HTTPS

RewriteCond %{HTTP_HOST} ^minhasvacinas\.online$ [NC]
RewriteRule ^(.\*)$ https://www.minhasvacinas.online/$1 [L,R=301]

# Redirecionar para HTTPS se não estiver usando

RewriteCond %{HTTPS} off
RewriteRule ^(.\*)$ https://%{HTTP_HOST}/$1 [L,R=301]

# Páginas de erro personalizadas

ErrorDocument 401 /assets/error/401.html
ErrorDocument 403 /assets/error/403.html
ErrorDocument 404 /assets/error/404.html
ErrorDocument 500 /assets/error/500.html

# Prevenir Hotlinking

RewriteCond %{HTTP_REFERER} !^https://www\.minhasvacinas\.online [NC]
RewriteCond %{HTTP_REFERER} !^$ [NC]
RewriteRule \.(jpg|jpeg|png|gif|bmp|webp)$ - [F,NC]

# Prevenir acesso a arquivos sensíveis

<FilesMatch "^.\*(\.env|\.htaccess|\.git|\.gitignore|\.htpasswd|config\.php)$">
Order Deny,Allow
Deny from all
</FilesMatch>

# Habilitar Cache de Navegador

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
</IfModule>

# Forçar HTTPS para recursos

Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

# Prevenir listagem de diretórios

Options -Indexes

# Bloquear IPs específicos

<RequireAll>
    Require all granted
    Require not ip 123.456.789.0
    Require not ip 111.222.333.4
</RequireAll>
